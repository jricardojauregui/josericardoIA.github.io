<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Proyecto 1 ‚Äî Ingresos de Hogares Mexicanos</title>
<style>

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: #0f1117; color: #e2e8f0; min-height: 100vh; }
  .page-content { max-width: 980px; margin: 0 auto; padding: 44px 24px 80px; }
  h1 { color: #f1f5f9; border-bottom: 2px solid #1f2937; padding-bottom: 10px; font-size: 1.55em; margin-bottom: 6px; }
  h2 { color: #60a5fa; margin-top: 44px; border-left: 4px solid #2563eb; padding-left: 12px; font-size: 1.15em; }
  h3 { color: #cbd5e1; margin-top: 24px; font-size: 1em; }
  .meta-bar { background: #1a2035; border: 1px solid #1f2937; border-radius: 8px; padding: 12px 18px; font-size: .88em; color: #94a3b8; margin: 18px 0 28px; }
  .meta-bar strong { color: #cbd5e1; }
  .obs { background: #0f1f35; border-left: 4px solid #2563eb; padding: 12px 18px; border-radius: 4px; margin: 16px 0; font-size: .93em; }
  .conc { background: #0d1f15; border-left: 4px solid #10b981; padding: 12px 18px; border-radius: 4px; margin: 16px 0; font-size: .93em; }
  img { max-width: 100%; border: 1px solid #1f2937; border-radius: 8px; margin: 14px 0; display: block; }
  table { border-collapse: collapse; width: 100%; font-size: .87em; margin: 14px 0; }
  th { background: #1e2d47; color: #93c5fd; padding: 9px 14px; text-align: left; border: 1px solid #1f2937; }
  td { border: 1px solid #1f2937; padding: 8px 14px; color: #cbd5e1; }
  tr:nth-child(even) { background: #141c2e; }
  tr.winner { background: #0d2218; }
  tr.winner td { color: #6ee7b7; font-weight: 600; }
  code { background: #1e2433; color: #93c5fd; padding: 2px 7px; border-radius: 4px; font-size: .88em; font-family: monospace; border: 1px solid #2d3748; }
  .equation { background: #1e2433; color: #a5f3fc; padding: 12px 20px; border-radius: 8px; font-family: monospace; font-size: .9em; margin: 16px 0; border: 1px solid #2d3748; overflow-x: auto; }
  .mg { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 12px; margin: 20px 0; }
  .mc { background: #1e2d47; border: 1px solid #2d3748; border-radius: 10px; padding: 14px 16px; text-align: center; }
  .mc.g { background: #0d2218; border-color: #065f46; }
  .mc .v { font-size: 1.6em; font-weight: 700; color: #60a5fa; }
  .mc.g .v { color: #6ee7b7; }
  .mc .lb { font-size: .76em; color: #64748b; margin-top: 4px; }
  .honor { border: 1px solid #2d3748; border-radius: 8px; padding: 14px 22px; margin-top: 50px; text-align: center; color: #64748b; font-size: .9em; }
  .ref { font-size: .83em; color: #475569; margin-top: 28px; line-height: 2; }
  .ref a { color: #60a5fa; }
  .badge { display: inline-block; background: #065f46; color: #6ee7b7; border-radius: 20px; padding: 2px 10px; font-size: .75em; font-weight: 700; margin-left: 6px; border: 1px solid #10b981; }
  .toc { background: #141c2e; border: 1px solid #1f2937; border-radius: 8px; padding: 16px 22px; margin-bottom: 32px; }
  .toc a { color: #60a5fa; text-decoration: none; display: block; padding: 3px 0; font-size: .9em; }
  .toc a:hover { color: #93c5fd; }
  .toc strong { color: #94a3b8; font-size: .82em; text-transform: uppercase; letter-spacing: .06em; }


  /* NAV */
  .nav {
    background: #111827;
    border-bottom: 1px solid #1f2937;
    padding: 0 28px;
    display: flex;
    align-items: center;
    gap: 0;
    position: sticky;
    top: 0;
    z-index: 100;
    min-height: 54px;
  }
  .nav-home {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #60a5fa;
    text-decoration: none;
    font-size: .88em;
    font-weight: 600;
    padding: 16px 20px 16px 0;
    border-right: 1px solid #1f2937;
    margin-right: 20px;
    white-space: nowrap;
    transition: color .2s;
  }
  .nav-home:hover { color: #93c5fd; }
  .nav-home .arrow { font-size: 1.1em; }
  .nav-crumb {
    color: #6b7280;
    font-size: .82em;
  }
  .nav-crumb span { color: #9ca3af; }

</style>
</head>
<body>
<nav class="nav">
  <a href="../index.html" class="nav-home"><span class="arrow">‚Üê</span> Portafolio</a>
  <span class="nav-crumb"><span>Proyecto 1</span></span>
</nav>
<div class="page-content">
<h1>Proyecto Parcial 1 ‚Äî Determinantes del Ingreso en Hogares Mexicanos</h1>
<div class="meta">
  <strong>Autor:</strong> Jos√© Ricardo J√°uregui Guevara &nbsp;|&nbsp; <strong>Matr√≠cula:</strong> 608995<br>
  Universidad de Monterrey ‚Äî Escuela de Ingenier√≠a y Tecnolog√≠as &nbsp;|&nbsp; Enero‚ÄìFebrero 2026
</div>

<div class="toc">
  <strong>√çndice</strong><br>
  <a href="#planteamiento">1. Planteamiento del problema y contexto de los datos</a>
  <a href="#exploracion">2. Exploraci√≥n inicial de los datos</a>
  <a href="#limpieza">3. Preparaci√≥n y limpieza de datos</a>
  <a href="#seleccion">4. Selecci√≥n de caracter√≠sticas</a>
  <a href="#modelos">5. Construcci√≥n y comparaci√≥n de modelos</a>
  <a href="#inferencia">6. An√°lisis de inferencia</a>
  <a href="#whatif">7. An√°lisis What-If (Puntos extra)</a>
  <a href="#conclusiones">8. Conclusiones</a>
  <a href="#referencias">9. Referencias</a>
</div>

<h2 id="planteamiento">1. Planteamiento del Problema y Contexto de los Datos</h2>
<p>En M√©xico, la desigualdad en los ingresos de los hogares es un tema de alta relevancia social y econ√≥mica. Comprender qu√© caracter√≠sticas est√°n asociadas con mayores o menores niveles de ingreso permite generar evidencia √∫til para la toma de decisiones y el dise√±o de intervenciones focalizadas.</p>

<p>Los datos provienen de la <strong>Encuesta Nacional de Ingresos y Gastos de los Hogares (ENIGH) 2014</strong> del INEGI, una fuente oficial con dise√±o muestral probabil√≠stico y representativo a nivel nacional. La <strong>variable objetivo</strong> es <code>ing_cor</code> (ingreso corriente total del hogar), transformada logar√≠tmicamente como <code>log_ing_cor</code> para corregir la fuerte asimetr√≠a positiva.</p>

<div class="obs"><strong>Enfoque:</strong> Regresi√≥n supervisada ‚Äî la variable objetivo es cuantitativa continua y se busca modelar su relaci√≥n con m√∫ltiples variables explicativas del hogar (caracter√≠sticas del jefe, composici√≥n demogr√°fica, condiciones socioecon√≥micas).</div>

<h2 id="exploracion">2. Exploraci√≥n Inicial de los Datos</h2>
<p>El dataset contiene <strong>58,125 hogares</strong> y <strong>59 variables</strong>: 23 enteras, 35 flotantes y 1 categ√≥rica (<code>ageb</code>). Ninguna variable presenta valores nulos.</p>

<h3>Diccionario de Variables (Selecci√≥n)</h3>
<table>
  <tr><th>Variable</th><th>Descripci√≥n</th><th>Tipo</th></tr>
  <tr><td><code>ing_cor</code> ‚≠ê</td><td>Ingreso corriente total del hogar (objetivo)</td><td>Float</td></tr>
  <tr><td><code>educa_jefe</code></td><td>Nivel de escolaridad del jefe del hogar</td><td>Int</td></tr>
  <tr><td><code>est_socio</code></td><td>Estrato socioecon√≥mico</td><td>Int</td></tr>
  <tr><td><code>edad_jefe</code></td><td>Edad del jefe del hogar (a√±os)</td><td>Int</td></tr>
  <tr><td><code>sexo_jefe</code></td><td>Sexo del jefe del hogar</td><td>Int</td></tr>
  <tr><td><code>ocupados</code></td><td>N√∫mero de integrantes ocupados</td><td>Int</td></tr>
  <tr><td><code>tot_integ</code></td><td>Total de integrantes del hogar</td><td>Int</td></tr>
  <tr><td><code>tam_loc</code></td><td>Tama√±o de la localidad</td><td>Int</td></tr>
  <tr><td><code>percep_ing</code></td><td>N√∫mero de perceptores de ingreso</td><td>Int</td></tr>
  <tr><td><code>clase_hog</code></td><td>Tipo de hogar seg√∫n composici√≥n</td><td>Int</td></tr>
</table>

<h3>Estad√≠sticas Descriptivas Clave</h3>
<table>
  <tr><th>Variable</th><th>Media</th><th>Desv. Est.</th><th>Min</th><th>Max</th></tr>
  <tr><td><code>ing_cor</code></td><td>38,213</td><td>70,876</td><td>0</td><td>~4.4M</td></tr>
  <tr><td><code>edad_jefe</code></td><td>48.8</td><td>15.7</td><td>14</td><td>97</td></tr>
  <tr><td><code>educa_jefe</code></td><td>5.53</td><td>3.03</td><td>0</td><td>11</td></tr>
  <tr><td><code>tot_integ</code></td><td>3.72</td><td>2.01</td><td>1</td><td>19</td></tr>
  <tr><td><code>ocupados</code></td><td>1.54</td><td>1.19</td><td>0</td><td>13</td></tr>
</table>

<div class="obs"><strong>Observaci√≥n:</strong> El ingreso corriente presenta media de ~38K vs mediana mucho menor, con desviaci√≥n est√°ndar de 70K ‚Äî fuerte asimetr√≠a positiva y valores extremos consistentes con la desigualdad real. Se aplic√≥ transformaci√≥n logar√≠tmica (<code>log_ing_cor = log1p(ing_cor)</code>) para estabilizar la varianza.</div>

<h2 id="limpieza">3. Preparaci√≥n y Limpieza de Datos</h2>

<div class="step">‚úÖ <strong>Valores nulos:</strong> Ninguna variable presenta datos faltantes en las 58,125 observaciones.</div>
<div class="step">üóëÔ∏è <strong>Eliminaci√≥n de IDs:</strong> Se descartaron <code>proyecto, folioviv, foliohog, ubica_geo, ageb, est_dis, upm</code> ‚Äî claves √∫nicas sin valor predictivo.</div>
<div class="step">üìä <strong>Transformaci√≥n logar√≠tmica:</strong> <code>log_ing_cor = log1p(ing_cor)</code> reduce la asimetr√≠a y estabiliza la varianza. Interpretaci√≥n: los coeficientes representan variaciones porcentuales en el ingreso.</div>
<div class="step">üîç <strong>Multicolinealidad:</strong> Los componentes espec√≠ficos del ingreso (sueldos, aguinaldo, rentas, etc.) se excluyeron para evitar redundancia perfecta con la variable objetivo.</div>

<h2 id="seleccion">4. Selecci√≥n de Caracter√≠sticas</h2>
<p>Se excluyeron los componentes de ingreso (generar√≠an multicolinealidad perfecta), el dise√±o muestral y el target. De las variables candidatas restantes se aplicaron <strong>tres m√©todos de selecci√≥n</strong>:</p>

<table>
  <tr><th>M√©todo</th><th>L√≥gica</th><th>Œ±</th></tr>
  <tr><td><strong>Backward Elimination</strong></td><td>Empieza con todas las variables, elimina la menos significativa iterativamente</td><td>0.05</td></tr>
  <tr><td><strong>Forward Selection</strong></td><td>Empieza sin variables, agrega la m√°s significativa iterativamente</td><td>0.05</td></tr>
  <tr><td><strong>Stepwise</strong></td><td>Combina ambos: agrega y puede eliminar en cada paso</td><td>in=0.05 / out=0.10</td></tr>
</table>

<h3>N√∫cleo Estable ‚Äî Variables Seleccionadas por los 3 M√©todos</h3>
<table>
  <tr><th>#</th><th>Variable</th><th>Descripci√≥n</th><th>Corr. con log_ing_cor</th></tr>
  <tr><td>1</td><td><code>educa_jefe</code></td><td>Nivel educativo del jefe</td><td>+0.440</td></tr>
  <tr><td>2</td><td><code>est_socio</code></td><td>Estrato socioecon√≥mico</td><td>+0.433</td></tr>
  <tr><td>3</td><td><code>ocupados</code></td><td>Integrantes ocupados</td><td>+0.35~</td></tr>
  <tr><td>4</td><td><code>mayores</code></td><td>Integrantes ‚â•18 a√±os</td><td>+</td></tr>
  <tr><td>5</td><td><code>edad_jefe</code></td><td>Edad del jefe</td><td>+</td></tr>
  <tr><td>6</td><td><code>percep_ing</code></td><td>Perceptores de ingreso</td><td>+</td></tr>
  <tr><td>7</td><td><code>tam_loc</code></td><td>Tama√±o de localidad</td><td>‚àí</td></tr>
  <tr><td>8</td><td><code>clase_hog</code></td><td>Tipo de hogar</td><td>+</td></tr>
  <tr><td>9</td><td><code>sexo_jefe</code></td><td>Sexo del jefe</td><td>‚àí</td></tr>
  <tr><td>10</td><td><code>p12_64</code></td><td>Personas de 12‚Äì64 a√±os</td><td>+</td></tr>
</table>

<div class="obs"><strong>Validez:</strong> La convergencia de los tres m√©todos hacia las mismas variables refuerza la robustez de la selecci√≥n. Las variables son coherentes con la literatura econ√≥mica: capital humano, participaci√≥n laboral, estructura demogr√°fica y contexto geogr√°fico.</div>

<h2 id="modelos">5. Construcci√≥n y Comparaci√≥n de Modelos</h2>
<p>Divisi√≥n: <strong>80% entrenamiento / 20% prueba</strong> | <code>random_state=0</code> | Variable objetivo: <code>log_ing_cor</code></p>

<h3>Modelo 1 ‚Äî Regresi√≥n Lineal M√∫ltiple (OLS)</h3>
<div class="eq">log_ing_cor = 7.9657 + 0.1270¬∑educa_jefe + 0.2524¬∑est_socio + 0.1939¬∑ocupados + 0.0211¬∑mayores + 0.0070¬∑edad_jefe + 0.0738¬∑percep_ing ‚àí 0.0799¬∑tam_loc + 0.0400¬∑clase_hog ‚àí 0.0489¬∑sexo_jefe + 0.0438¬∑p12_64</div>

<h3>Modelo 2 ‚Äî Random Forest Base</h3>
<p>Configuraci√≥n por defecto de sklearn (<code>n_estimators=100</code>, sin restricciones de profundidad).</p>

<h3>Modelo 3 ‚Äî Random Forest Optimizado <span class="badge">‚úÖ MEJOR</span></h3>
<p>Optimizaci√≥n con <code>RandomizedSearchCV</code> (10 iteraciones, 5-fold CV). Par√°metros finales:</p>
<code>max_depth=10 | min_samples_leaf=2 | min_samples_split=14 | n_estimators=1000 | criterion=friedman_mse</code>

<h3>Tabla Comparativa de Resultados</h3>
<table>
  <tr><th>Modelo</th><th>R¬≤ Train</th><th>R¬≤ Test</th><th>Brecha</th><th>RMSE Test</th><th>MAE Test</th></tr>
  <tr><td>Regresi√≥n Lineal</td><td>0.4407</td><td>0.4387</td><td>0.0020</td><td>0.6719</td><td>0.4997</td></tr>
  <tr><td>RF Base</td><td>0.8494</td><td>0.3596</td><td>0.4898</td><td>0.7176</td><td>0.5331</td></tr>
  <tr class="winner"><td>‚úÖ RF Optimizado</td><td>0.5386</td><td>0.4676</td><td>0.0710</td><td>0.6543</td><td>0.4843</td></tr>
</table>

<div class="mg">
  <div class="mc"><div class="v">0.4676</div><div class="lb">R¬≤ Prueba (RF Opt.)</div></div>
  <div class="mc l"><div class="v">0.6543</div><div class="lb">RMSE Prueba</div></div>
  <div class="mc g"><div class="v">7.1%</div><div class="lb">Brecha Train/Test</div></div>
  <div class="mc l"><div class="v">0.4843</div><div class="lb">MAE Prueba</div></div>
</div>

<div class="obs">
  <strong>¬øPor qu√© el RF Optimizado es el mejor?</strong><br>
  (1) Mayor R¬≤ en prueba (0.4676) ‚Äî explica 46.8% de la variabilidad en datos no vistos.<br>
  (2) Menor RMSE (0.6543) y MAE (0.4843) ‚Äî predicciones m√°s cercanas al valor real.<br>
  (3) Brecha de solo 7.1% ‚Äî la optimizaci√≥n corrigi√≥ el sobreajuste severo del RF base (49%).
</div>

<h3>Importancia de Variables ‚Äî RF Optimizado</h3>
<table>
  <tr><th>Variable</th><th>Importancia</th><th>Interpretaci√≥n</th></tr>
  <tr><td><code>educa_jefe</code></td><td>0.3314</td><td>Capital humano: mayor educaci√≥n ‚Üí mayor ingreso</td></tr>
  <tr><td><code>ocupados</code></td><td>0.2312</td><td>Participaci√≥n laboral del hogar</td></tr>
  <tr><td><code>est_socio</code></td><td>0.1772</td><td>Posici√≥n socioecon√≥mica estructural</td></tr>
  <tr><td><code>percep_ing</code></td><td>0.0738</td><td>Diversificaci√≥n de fuentes de ingreso</td></tr>
  <tr><td><code>edad_jefe</code></td><td>~0.06</td><td>Efecto ciclo de vida laboral</td></tr>
</table>

<h2 id="inferencia">6. An√°lisis de Inferencia (OLS con errores robustos HC3)</h2>
<p>Se ajust√≥ un modelo OLS con errores est√°ndar robustos HC3 para obtener estimaciones confiables incluso con heterocedasticidad.</p>

<table>
  <tr><th>Variable</th><th>Coeficiente (Œ≤)</th><th>Efecto en ing_cor real</th><th>P-valor</th></tr>
  <tr><td><code>est_socio</code></td><td>+0.256</td><td>+29.2% por estrato</td><td>&lt;0.001</td></tr>
  <tr><td><code>ocupados</code></td><td>+0.196</td><td>+21.6% por ocupado adicional</td><td>&lt;0.001</td></tr>
  <tr><td><code>educa_jefe</code></td><td>+0.127</td><td>+13.5% por nivel educativo</td><td>&lt;0.001</td></tr>
  <tr><td><code>percep_ing</code></td><td>+0.074</td><td>+7.7% por perceptor adicional</td><td>&lt;0.001</td></tr>
  <tr><td><code>sexo_jefe</code></td><td>‚àí0.049</td><td>‚àí5.1% (hogares encabezados por mujeres)</td><td>&lt;0.001</td></tr>
  <tr><td><code>tam_loc</code></td><td>‚àí0.080</td><td>‚àí7.3% (localidades m√°s peque√±as)</td><td>&lt;0.001</td></tr>
</table>

<div class="obs">Todas las variables son estad√≠sticamente significativas (p &lt; 0.001). Los intervalos de confianza al 95% son angostos gracias al gran tama√±o muestral (n=58,125). No se us√≥ Random Forest para inferencia porque no permite calcular p-valores ni intervalos de confianza individuales.</div>

<h2 id="whatif">7. An√°lisis What-If (Puntos Extra)</h2>
<p>Usando el <strong>RF Optimizado</strong> y un hogar de referencia (valores promedio de todas las variables):</p>

<table>
  <tr><th>Escenario</th><th>Cambio</th><th>Ingreso estimado</th></tr>
  <tr><td>Hogar base (promedio)</td><td>‚Äî</td><td>Referencia</td></tr>
  <tr><td>+1 nivel educativo del jefe</td><td><code>educa_jefe += 1</code></td><td>‚Üë Incremento positivo</td></tr>
  <tr><td>+1 integrante ocupado</td><td><code>ocupados += 1</code></td><td>Efecto no lineal</td></tr>
  <tr><td>Ciudad grande</td><td><code>tam_loc = 1</code></td><td>‚Üë Incremento notable</td></tr>
</table>

<div class="obs">Los resultados muestran asociaciones predictivas, no causalidad directa. El RF captura interacciones entre variables, por lo que el efecto de una variable depende del perfil completo del hogar.</div>

<h2 id="conclusiones">8. Conclusiones</h2>
<div class="conc">
  <p>El <strong>Random Forest Optimizado</strong> es el modelo con mejor balance entre precisi√≥n y generalizaci√≥n (R¬≤=0.47, RMSE=0.65, brecha=7.1%). Explica el 47% de las diferencias en el ingreso logar√≠tmico ‚Äî valor t√≠pico para estudios de encuestas de hogares en pa√≠ses de ingreso medio.</p>
  
  <p><strong>Hallazgos principales:</strong></p>
  <ul>
    <li>En el modelo no lineal (RF): <strong>educa_jefe</strong> es el predictor m√°s importante (importancia 0.33).</li>
    <li>En el modelo lineal (OLS): <strong>est_socio</strong> tiene el mayor efecto marginal controlado (+29.2%).</li>
    <li>Hogares con jefas mujeres tienen ~5.1% menos ingreso; hogares rurales ~7.3% menos.</li>
    <li>La convergencia de los tres m√©todos de selecci√≥n hacia las mismas variables refuerza la robustez del an√°lisis.</li>
  </ul>

  <p><strong>Limitaciones:</strong> Dataset de 2014 (puede haber cambios estructurales), no implica causalidad, 53% de variabilidad a√∫n sin explicar.</p>
</div>

<div class="honor">He realizado este proyecto con integridad acad√©mica.</div>

<div class="ref" id="referencias">
  <h2>9. Referencias</h2>
  INEGI (2014). <em>ENIGH 2014 ‚Äî Principales variables por hogar</em>. https://www.inegi.org.mx/programas/enigh/nc/2014/<br>
  Pedregosa et al. (2011). <em>Scikit-learn: Machine learning in Python</em>. JMLR.<br>
  Seabold & Perktold (2010). <em>Statsmodels</em>. https://www.statsmodels.org<br>
  Breiman, L. (2001). <em>Random Forests</em>. Machine Learning, 45(1), 5‚Äì32.<br>
  White, H. (1980). <em>A heteroskedasticity-consistent covariance matrix estimator</em>. Econometrica.<br>
  CONEVAL (2023). <em>Metodolog√≠a para la medici√≥n multidimensional de la pobreza en M√©xico</em>. https://www.coneval.org.mx<br>
  UDEM (2026). Presentaciones del curso ‚Äî Dr. Antonio Mart√≠nez Torteya.
</div>
</div>
</body>
</html>
